<!doctype html>
<html lang="">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 1.0.0" />
    <title>Introduction</title>
    
    
    <meta name="description" content="docs" />
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Source+Sans+Pro:300,400,600"
        rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Pro:400" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/creative-scala.css" />
    <script src="js/toc.js"></script><script src="js/solution.js"></script><script src="main.js"></script>
    <script> /* for avoiding page load transitions */</script>
</head>

<body>
    <nav id="topbar">
      <details>
        <summary>Cats Effect Tutorial</summary>
        <ul class="nav-list">
          <li class="level1 active nav-leaf"><a href="#">Introduction</a></li>
          <li class="level1 nav-leaf"><a href="clock.html">Clock</a></li>
        </ul>
      </details>
    </nav>
    <nav id="sidebar">
        <ul class="nav-list">
          <li class="level1 nav-leaf"><a href="index.html">Cats Effect Tutorial</a></li>
          <li class="level1 active nav-leaf"><a href="#">Introduction</a></li>
          <li class="level1 nav-leaf"><a href="clock.html">Clock</a></li>
        </ul>
    </nav>

    <div id="content">
        <main class="content">
            <h1 id="introduction" class="title">Introduction</h1>
            <p>To start with we should explain what an effect is, and hence the problem that Cats Effect is solving. There is already an <a href="https://www.inner-product.com/posts/what-is-an-effect/">excellent blog post</a> that does just that, so go and read it now.</p>
            <p>Now you understand what problem Cats Effect is trying to solve, and what it means for <code>IO</code> to be an effect type, let&#39;s start using <code>IO</code>. Complete the challenge in <a href="https://github.com/creativescala/cats-effect-tutorial/blob/main/code/src/main/scala/introduction/01-basics.scala"><code>code/src/main/scala/introduction/01-basics.scala</code></a>.</p>
            <p>Most exercises will have solutions, just like the one below. It&#39;s a good idea to read them <em>even if you successfully solved the exercise</em>, as they&#39;ll talk about the lessons you should learn from the exercise, not just the solution to the exercise itself.</p>
            <div class="solution">
              <div class="solution-body">
                <p>The distinction between the description of an effect and the act of carrying out that description is made clear by defining <code>run</code> as a <code>val</code>. It can be a <code>val</code> <em>because</em> an <code>IO</code> is just a description. It does nothing until it is run.</p>
                <ol class="arabic">
                  <li>
                    <p>The different constructors get to the difference between effectful and pure programs. It doesn&#39;t matter if we run a pure program multiple time or only once: it always produces the same result. Hence <code>IO.pure</code> can evaluate it&#39;s argument once (at the time of construction) and cache that value. This is not the case for effectful programs, which use the <code>apply</code> constructor. We can illustrate the difference by using, say, <code>IO.pure(println(&quot;Hello&quot;))</code> and <code>IO(println(&quot;Hello&quot;))</code>.</p>
                  </li>
                  <li>
                    <p><code>IO.realTime.flatMap(println _)</code></p>
                  </li>
                  <li>
                    <p>If you replace <code>1</code> and <code>2</code> with effects (e.g. <code>println</code>) you can see in what order they are run. It&#39;s always the same: left-to-right.</p>
                  </li>
                  <li>
                    <p>It&#39;s incorrect. This is a common error. <code>IO</code> is a description, to writing <code>val _ = io</code> does nothing.</p>
                  </li>
                  <li>
                    <p>This will do</p>
                    <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">log</span><span>[</span><span class="type-name">A</span><span>](</span><span class="identifier">io</span><span>: </span><span class="type-name">IO</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">IO</span><span>[</span><span class="type-name">A</span><span>] = {
 </span><span class="type-name">IO</span><span>.</span><span class="identifier">println</span><span>(</span><span class="string-literal">&quot;Starting&quot;</span><span>)
   .</span><span class="identifier">flatMap</span><span>(</span><span class="identifier">_</span><span> =&gt; </span><span class="identifier">io</span><span>)
   .</span><span class="identifier">flatMap</span><span>(</span><span class="identifier">a</span><span> =&gt; </span><span class="type-name">IO</span><span>.</span><span class="identifier">println</span><span>(</span><span class="string-literal">&quot;Stopping&quot;</span><span>).</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span> =&gt; </span><span class="identifier">a</span><span>))
}</span></code></pre>
                    <p>A more stylish implementation would use a for comprehension.</p>
                  </li>
                  <li>
                    <p>This is an exercise in reading type signatures. <code>a *&gt; b</code> creates an <code>IO</code> that runs <code>a</code>, discards it&#39;s result, and then runs <code>b</code>. We can write <code>log</code> as</p>
                    <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">log</span><span>[</span><span class="type-name">A</span><span>](</span><span class="identifier">io</span><span>: </span><span class="type-name">IO</span><span>[</span><span class="type-name">A</span><span>]): </span><span class="type-name">IO</span><span>[</span><span class="type-name">A</span><span>] = {
 </span><span class="type-name">IO</span><span>.</span><span class="identifier">println</span><span>(</span><span class="string-literal">&quot;Starting&quot;</span><span>) *&gt; </span><span class="identifier">io</span><span> &lt;* </span><span class="type-name">IO</span><span>.</span><span class="identifier">println</span><span>(</span><span class="string-literal">&quot;Stopping&quot;</span><span>)
}</span></code></pre>
                    <p>Whether we should do this or not depends on the context in which we&#39;re writing code. The <code>*&gt;</code> and <code>&lt;*</code> operators are a bit obscure, so they make our code less accessible to others. Use with caution.</p>
                  </li>
                </ol>
              </div>
            </div>
            <div class="flex flex-row justify-between">
                <a class="pageNavigation" href="index.html">←Cats Effect Tutorial</a> <a class="pageNavigation" href="clock.html">Clock→</a>
            </div>
        </main>
        <footer>Creative Scala is copyright Noel Welsh</footer>
    </div>

    </div>
</body>

</html>
